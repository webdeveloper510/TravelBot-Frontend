{"ast":null,"code":"import _toConsumableArray from\"/home/codenomad/Downloads/material-dashboard-react-main/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/home/codenomad/Downloads/material-dashboard-react-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/*eslint-disable*/import axios from\"axios\";import React,{useEffect,useState,useRef}from\"react\";import{API}from\"config/Api\";import logo from\"../../assets/images/logo.png\";import ThumbDownIcon from'@mui/icons-material/ThumbDown';import ThumbUpIcon from'@mui/icons-material/ThumbUp';import Icon from\"@mui/material/Icon\";import Grid from\"@mui/material/Grid\";import MDTypography from\"components/MDTypography\";import TextField from\"@mui/material/TextField\";import MDBox from\"components/MDBox\";import MDButton from\"components/MDButton\";import MDSnackbar from\"components/MDSnackbar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var PreViewPage=function PreViewPage(){// States Management ------------------------------------------------------------------------------------->\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),questions=_useState2[0],setQuestions=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),currentQuestion=_useState4[0],setCurrentQuestion=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),currentAnswer=_useState6[0],setCurrentAnswer=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),answers=_useState8[0],setAnswers=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),chatHistory=_useState10[0],getChatHistory=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),latestAnswerIndex=_useState12[0],setLatestAnswerIndex=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),AnswerID=_useState14[0],setAnswerID=_useState14[1];var _useState15=useState(null),_useState16=_slicedToArray(_useState15,2),CurrentAnswerID=_useState16[0],setCurrentAnswerID=_useState16[1];var _useState17=useState(null),_useState18=_slicedToArray(_useState17,2),NewAnswer=_useState18[0],setNewAnswer=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),showAnswerChange=_useState20[0],setShowAnswerChange=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),AnswerUpdate=_useState22[0],setAnswerUpdate=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),AnswerTime=_useState24[0],setAnswerTime=_useState24[1];var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),EffectReloadState=_useState26[0],setEffectReloadState=_useState26[1];var chatContainerRef=useRef(null);var _useState27=useState(null),_useState28=_slicedToArray(_useState27,2),UpdatedConstAnsId=_useState28[0],setUpdatedConstAnsId=_useState28[1];var accessToken=localStorage.getItem(\"Token\");// Functions Management ------------------------------------------------------------------------------------->\nuseEffect(function(){axios.get(API.BASE_URL+\"userhistory/\",{headers:{Authorization:\"Bearer \".concat(accessToken)}}).then(function(res){// getChatHistory(res.data.data)\nvar chatHistory=res.data.data;var questionArray=chatHistory.map(function(item){return item.questions;});var answerArray=chatHistory.map(function(item){return item.answer;});var answerTIme=chatHistory.map(function(item){return item.time;});var answerID=chatHistory.map(function(item){return item.id;});setEffectReloadState(false);// Update the questions and answers state\nsetQuestions(questionArray);setAnswers(answerArray);setAnswerTime(answerTIme);setAnswerID(answerID);}).catch(function(error){console.log(error);});},[EffectReloadState]);var handleInputQuestion=function handleInputQuestion(event){setCurrentQuestion(event.target.value);};var scrollToBottom=function scrollToBottom(){if(chatContainerRef.current){chatContainerRef.current.scrollTop=chatContainerRef.current.scrollHeight;}};var handleQuestionSubmit=function handleQuestionSubmit(){if(currentQuestion.trim()!==\"\"){setQuestions([].concat(_toConsumableArray(questions),[currentQuestion]));setCurrentQuestion(\"\");scrollToBottom();}var formdata=new FormData();formdata.append(\"query\",currentQuestion);// Assuming currentQuestion is defined\naxios.post(API.BASE_URL+\"prediction/\",formdata,{headers:{Authorization:\"Bearer \".concat(accessToken)// Assuming accessToken is defined\n}}).then(function(response){var AnswerGet=response.data.Answer;// Declare AnswerGet\nvar AnswerIDGet=response.data.id;// Declare AnswerIDGet\nsetAnswerID([].concat(_toConsumableArray(AnswerID),[AnswerIDGet]));setCurrentAnswerID(AnswerIDGet);setAnswers([].concat(_toConsumableArray(answers),[AnswerGet]));// Assuming answers and setAnswers are defined\nsetCurrentAnswer(AnswerGet);setLatestAnswerIndex(answers.length);// Assuming setLatestAnswerIndex is defined\nsetEffectReloadState(true);// Assuming setEffectReloadState is defined\nscrollToBottom();// Assuming scrollToBottom is defined\n}).catch(function(error){console.log(error);var AnswerGet=error.response.data.Answer;// Declare AnswerGet\nsetAnswers([].concat(_toConsumableArray(answers),[AnswerGet]));// Assuming answers and setAnswers are defined\nsetCurrentAnswer(AnswerGet);setLatestAnswerIndex(answers.length);// Assuming setLatestAnswerIndex is defined\nscrollToBottom();// Assuming scrollToBottom is defined\n});};// Enter Function On Submit Question \nvar handleKeyPress=function handleKeyPress(event){if(event.key===\"Enter\"){handleQuestionSubmit();}};// Change Chat-bot Answer\nvar handleChangeInputAnswer=function handleChangeInputAnswer(event){setNewAnswer(event.target.value);};// Handle Answer edit (Suggestions) Open Pop-Up\nvar handleEditAnswer=function handleEditAnswer(id){setUpdatedConstAnsId(id);setShowAnswerChange(true);};// Handle Close (Suggestion Pop-Up)\nvar handleCloseAnswerUpdate=function handleCloseAnswerUpdate(){setShowAnswerChange(false);};// Handle Update the Answer with the Question ID\nvar handleAnswerUpdate=function handleAnswerUpdate(){var formData=new FormData();formData.append(\"suggestion\",NewAnswer);axios.put(API.BASE_URL+\"suggestion/\"+UpdatedConstAnsId+\"/\",formData,{headers:{Authorization:\"Bearer \".concat(accessToken)}}).then(function(res){setAnswerUpdate(true);setShowAnswerChange(false);setEffectReloadState(true);// Assuming setEffectReloadState is defined\n}).catch(function(error){setShowAnswerChange(false);});};// Handle to set the latest Index of the Answer and Question using the Signs\nvar handleSaveAnswer=function handleSaveAnswer(){setLatestAnswerIndex(null);};// SnackBar Handle To close on the Button \nvar closeWarningSB=function closeWarningSB(){setAnswerUpdate(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"chat-side px-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat-messages\",ref:chatContainerRef,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"loader-\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"dot\"}),/*#__PURE__*/_jsx(\"div\",{className:\"dot\"}),/*#__PURE__*/_jsx(\"div\",{className:\"dot\"})]}),questions.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center date\",children:/*#__PURE__*/_jsx(\"p\",{children:\"10-Oct-2023\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-start\",children:questions.map(function(question,index){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"display-flex\",children:[/*#__PURE__*/_jsxs(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"30\",height:\"30\",viewBox:\"0 0 64 64\",className:\"display-flex self-center mr-2\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"32\",cy:\"32\",r:\"30\",fill:\"#ff5722\"}),/*#__PURE__*/_jsx(\"text\",{x:\"20\",y:\"42\",fill:\"#fff\",fontFamily:\"Arial, sans-serif\",fontSize:\"36\",children:\"T\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"question-submit\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"question\",children:question}),/*#__PURE__*/_jsx(\"div\",{className:\"text-right\"})]})]}),answers.length>0&&answers[index]!==\"\"?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"display-flex\",children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"30\",height:\"30\",\"data-name\":\"Layer 1\",viewBox:\"0 0 24 24\",className:\"display-flex self-center mr-2\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M22 11a4 4 0 00-2-3.48A3 3 0 0020 7a3 3 0 00-3-3h-.18A3 3 0 0012 2.78 3 3 0 007.18 4H7a3 3 0 00-3 3 3 3 0 000 .52 4 4 0 00-.55 6.59A4 4 0 007 20h.18A3 3 0 0012 21.22 3 3 0 0016.82 20H17a4 4 0 003.5-5.89A4 4 0 0022 11zM11 8.55a4.72 4.72 0 00-.68-.32 1 1 0 00-.64 1.9A2 2 0 0111 12v1.55a4.72 4.72 0 00-.68-.32 1 1 0 00-.64 1.9A2 2 0 0111 17v2a1 1 0 01-1 1 1 1 0 01-.91-.6 4.07 4.07 0 00.48-.33 1 1 0 10-1.28-1.54A2 2 0 017 18a2 2 0 01-2-2 2 2 0 01.32-1.06A3.82 3.82 0 006 15a1 1 0 000-2 1.84 1.84 0 01-.69-.13A2 2 0 015 9.25a3.1 3.1 0 00.46.35 1 1 0 101-1.74.9.9 0 01-.34-.33A.92.92 0 016 7a1 1 0 011-1 .76.76 0 01.21 0 3.85 3.85 0 00.19.47 1 1 0 001.37.37 1 1 0 00.36-1.34A1.06 1.06 0 019 5a1 1 0 012 0zm7.69 4.32A1.84 1.84 0 0118 13a1 1 0 000 2 3.82 3.82 0 00.68-.06A2 2 0 0119 16a2 2 0 01-2 2 2 2 0 01-1.29-.47 1 1 0 00-1.28 1.54 4.07 4.07 0 00.48.33 1 1 0 01-.91.6 1 1 0 01-1-1v-2a2 2 0 011.32-1.87 1 1 0 00-.64-1.9 4.72 4.72 0 00-.68.32V12a2 2 0 011.32-1.87 1 1 0 00-.64-1.9 4.72 4.72 0 00-.68.32V5a1 1 0 012 0 1.06 1.06 0 01-.13.5 1 1 0 00.36 1.37 1 1 0 001.37-.37 3.85 3.85 0 00.19-.5.76.76 0 01.21 0 1 1 0 011 1 1 1 0 01-.17.55.9.9 0 01-.33.31 1 1 0 001 1.74 2.66 2.66 0 00.5-.35 2 2 0 01-.27 3.62z\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-response\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"answer\",children:answers[index]?answers[index]:\"....\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-right\",children:/*#__PURE__*/_jsx(\"small\",{children:AnswerTime[index]?AnswerTime[index].split(':').slice(0,2).join(':'):\"\"})})]})]}),latestAnswerIndex===index?/*#__PURE__*/_jsxs(\"div\",{className:\"thumbs-check\",children:[/*#__PURE__*/_jsx(ThumbUpIcon,{color:\"info\",style:{cursor:\"pointer\"},onClick:handleSaveAnswer}),/*#__PURE__*/_jsx(ThumbDownIcon,{color:\"warning\",style:{cursor:\"pointer\"},onClick:function onClick(e){return handleEditAnswer(AnswerID[index]);}})]}):\"\"]},index):/*#__PURE__*/_jsx(_Fragment,{})]},index);})})]}):/*#__PURE__*/_jsx(\"div\",{className:\"logo-ct\",children:/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"chat image\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-padd\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control-chat\",value:currentQuestion,onChange:handleInputQuestion,onKeyPress:handleKeyPress}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",type:\"submit\",onClick:handleQuestionSubmit,children:/*#__PURE__*/_jsxs(\"svg\",{id:\"ic_send\",fill:\"#FFFFFF\",height:\"24\",viewBox:\"0 0 24 24\",width:\"24\",xmlns:\"http://www.w3.org/2000/svg\",\"aria-hidden\":\"true\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M0 0h24v24H0z\",fill:\"none\"})]})})]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-center text-gray w-100 mt-2 copyright\",children:\"\\xA9 2023 Exclusive Malta, All rights reserved\"})]}),showAnswerChange?/*#__PURE__*/_jsx(\"div\",{className:\"modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"close-div\",children:/*#__PURE__*/_jsx(\"button\",{className:\"close-button\",icon:\"close\",onClick:handleCloseAnswerUpdate,children:/*#__PURE__*/_jsx(Icon,{children:\"close\"})})}),/*#__PURE__*/_jsxs(Grid,{item:true,children:[/*#__PURE__*/_jsx(MDTypography,{variant:\"h6\",fontWeight:\"medium\",textTransform:\"capitalize\",textAlign:\"center\",children:\"Enter Suggestion\"}),/*#__PURE__*/_jsx(MDBox,{pt:4,pb:3,px:3,children:/*#__PURE__*/_jsxs(MDBox,{component:\"form\",role:\"form\",children:[/*#__PURE__*/_jsx(MDBox,{mb:2,children:/*#__PURE__*/_jsx(TextField,{id:\"outlined-multiline-static\",multiline:true,rows:4,fullWidth:true,variant:\"outlined\",value:NewAnswer,onChange:handleChangeInputAnswer})}),/*#__PURE__*/_jsx(MDBox,{mt:4,mb:1,children:/*#__PURE__*/_jsx(MDButton,{variant:\"gradient\",color:\"info\",fullWidth:true,onClick:handleAnswerUpdate,children:\"Click To Enter\"})})]})})]})]})}):/*#__PURE__*/_jsx(_Fragment,{}),/*#__PURE__*/_jsx(MDSnackbar,{color:\"success\",icon:\"check\",title:\"Answer Updated\",content:\"Answer Updated Successfully!\",dateTime:\"Now\",open:AnswerUpdate,onClose:closeWarningSB,close:closeWarningSB,bgWhite:true})]});};export default PreViewPage;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}