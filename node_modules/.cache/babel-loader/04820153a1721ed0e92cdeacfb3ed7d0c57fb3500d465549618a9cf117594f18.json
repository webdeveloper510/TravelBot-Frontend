{"ast":null,"code":"import _slicedToArray from\"/home/codenomad/Downloads/material-dashboard-react-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/* eslint-disable react/prop-types */ /* eslint-disable react/function-component-definition */ /**\n=========================================================\n* Admin Dashboard,Dashboard Files get page.\n=========================================================\n*/ /*eslint-disable*/ // @mui material components\nimport MDBox from\"components/MDBox\";import MDTypography from\"components/MDTypography\";import MDAvatar from\"components/MDAvatar\";import MDButton from\"components/MDButton\";// Images\nimport{useEffect,useState}from\"react\";import axios from\"axios\";import{API}from\"config/Api\";import Icon from\"@mui/material/Icon\";import Menu from\"@mui/material/Menu\";import MenuItem from\"@mui/material/MenuItem\";import MDSnackbar from\"components/MDSnackbar\";import{Grid}from\"@mui/material\";import TextField from\"@mui/material/TextField\";import MDInput from\"components/MDInput\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function data(props){// States Management -------------------------------------------------------------------------------------------->\nvar adminAccessToken=localStorage.getItem(\"Admin-Token\");var _useState=useState([]),_useState2=_slicedToArray(_useState,2),FilesList=_useState2[0],SetFilesList=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),FilesId=_useState4[0],SetFilesId=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),SuccessDeleteFile=_useState6[0],setSuccessDeleteFile=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),menu=_useState8[0],setMenu=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),showFeedInput=_useState10[0],setShowFeedInput=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),feedQuestionAdd=_useState12[0],setFeedQuestionAdd=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),feedAdded=_useState14[0],setFeedAdded=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),UpdateFeedValue=_useState16[0],setUpdateFeedValue=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),UpdateErrFeedValue=_useState18[0],setUpdateErrFeedValue=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),UpdateState=_useState20[0],setUpdateState=_useState20[1];// FUMCTIONS Management -------------------------------------------------------------------------------------------->\nvar handlefeedQuestion=function handlefeedQuestion(event){setFeedQuestionAdd(event.target.value);};var handlefeedAns=function handlefeedAns(event){setFeedAdded(event.target.value);};useEffect(function(){axios.get(API.BASE_URL+\"userhistory/\",{headers:{Authorization:\"Bearer \".concat(adminAccessToken)}}).then(function(res){SetFilesList(res.data.data);setUpdateState(false);props.setTrigger(false);}).catch(function(err){console.log(err);});},[UpdateState,props.trigger]);var openMenu=function openMenu(_ref,id,question,answer){var currentTarget=_ref.currentTarget;setFeedQuestionAdd(question);setFeedAdded(answer);setMenu(currentTarget);SetFilesId(id);};var closeMenu=function closeMenu(){return setMenu(null);};var handleEditFile=function handleEditFile(){setShowFeedInput(true);};var handleSubmitUpdateFeed=function handleSubmitUpdateFeed(){var formData=new FormData();formData.append(\"suggestion\",feedAdded);axios.put(API.BASE_URL+\"suggestion/\"+FilesId+\"/\",formData,{headers:{Authorization:\"Bearer \".concat(adminAccessToken)}}).then(function(response){console.log(response);setShowFeedInput(false);setUpdateFeedValue(true);setUpdateState(true);}).catch(function(error){setShowFeedInput(false);setUpdateErrFeedValue(true);});};var handleCloseFeed=function handleCloseFeed(){setShowFeedInput(false);};var handleDeleteQuestion=function handleDeleteQuestion(id){console.log(id);// axios.delete(API.BASE_URL+\"deletefile/\"+id+\"/\",{\n//   headers: {\n//     Authorization: `Bearer ${adminAccessToken}`,\n//   },\n// }).then((res)=>{\n//   setSuccessDeleteFile(true);\n//   props.setTrigger(true)\n// }).catch((err)=>{\n//   console.log(err)\n// })\n};var closeWarningSB=function closeWarningSB(){setSuccessDeleteFile(false);setUpdateFeedValue(false);setUpdateErrFeedValue(false);};var Filename=function Filename(_ref2){var image=_ref2.image,name=_ref2.name;return/*#__PURE__*/_jsxs(MDBox,{display:\"flex\",alignItems:\"center\",lineHeight:1,children:[/*#__PURE__*/_jsx(MDAvatar,{src:image,name:name,size:\"sm\"}),/*#__PURE__*/_jsx(MDTypography,{variant:\"button\",fontWeight:\"medium\",ml:1,lineHeight:1,children:name})]});};return{columns:[{Header:\"Question\",accessor:\"question\",width:\"45%\",align:\"left\"},{Header:\"Answers\",accessor:\"answers\",width:\"45%\",align:\"left\"},{Header:\"Action\",accessor:\"action\",align:\"center\"}],rows:FilesList.map(function(files){return{question:/*#__PURE__*/_jsx(MDBox,{children:files.questions}),answers:/*#__PURE__*/_jsx(MDBox,{children:files.answer}),action:/*#__PURE__*/_jsxs(MDTypography,{variant:\"caption\",color:\"text\",fontWeight:\"medium\",children:[/*#__PURE__*/_jsx(MDBox,{color:\"text\",px:2,children:/*#__PURE__*/_jsx(Icon,{sx:{cursor:\"pointer\",fontWeight:\"bold\"},fontSize:\"small\",onClick:function onClick(event){return openMenu(event,files.id,files.questions,files.answer);},children:\"more_vert\"})}),/*#__PURE__*/_jsxs(Menu,{id:\"simple-menu\",anchorEl:menu,anchorOrigin:{vertical:\"top\",horizontal:\"left\"},transformOrigin:{vertical:\"top\",horizontal:\"right\"},open:Boolean(menu),onClose:closeMenu,children:[/*#__PURE__*/_jsx(MenuItem,{style:{color:\"blue\"},onClick:function onClick(){handleEditFile();},children:\"Edit\"}),/*#__PURE__*/_jsx(MenuItem,{style:{color:\"red\"},onClick:function onClick(){handleDeleteQuestion(FilesId);},children:\"Delete\"})]}),showFeedInput?/*#__PURE__*/_jsx(\"div\",{className:\"modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"close-div\",children:/*#__PURE__*/_jsx(\"button\",{className:\"close-button\",icon:\"close\",onClick:handleCloseFeed,children:/*#__PURE__*/_jsx(Icon,{children:\"close\"})})}),/*#__PURE__*/_jsxs(Grid,{item:true,children:[/*#__PURE__*/_jsx(MDTypography,{variant:\"h6\",fontWeight:\"medium\",textTransform:\"capitalize\",textAlign:\"center\",children:\"Enter Feed\"}),/*#__PURE__*/_jsx(MDBox,{pt:4,pb:3,px:3,children:/*#__PURE__*/_jsxs(MDBox,{component:\"form\",role:\"form\",children:[/*#__PURE__*/_jsx(MDBox,{mb:2,children:/*#__PURE__*/_jsx(MDInput,{type:\"text\",onChange:handlefeedQuestion,name:\"feedQuestionAdd\",label:\"Question\",defaultValue:feedQuestionAdd,fullWidth:true})}),/*#__PURE__*/_jsx(MDBox,{mb:2,children:/*#__PURE__*/_jsx(TextField,{id:\"outlined-multiline-static\",label:\"Add Feed\",onChange:handlefeedAns,name:\"answer\",multiline:true,rows:4,defaultValue:feedAdded,fullWidth:true,variant:\"outlined\"})}),/*#__PURE__*/_jsx(MDBox,{mt:4,mb:1,children:/*#__PURE__*/_jsx(MDButton,{variant:\"gradient\",color:\"info\",fullWidth:true,onClick:handleSubmitUpdateFeed,children:\"Feed\"})})]})})]})]})}):/*#__PURE__*/_jsx(_Fragment,{}),/*#__PURE__*/_jsx(MDSnackbar,{color:\"error\",icon:\"error\",title:\"File Deleted\",content:\"Error Occured\",dateTime:\"Now\",open:UpdateErrFeedValue,onClose:closeWarningSB,close:closeWarningSB,bgWhite:true}),/*#__PURE__*/_jsx(MDSnackbar,{color:\"success\",icon:\"check\",title:\"Feed Updated\",content:\"Feed Updated Successfully!\",dateTime:\"Now\",open:UpdateFeedValue,onClose:closeWarningSB,close:closeWarningSB,bgWhite:true})]})};})};}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}